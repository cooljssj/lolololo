<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–æ—Ñ–∏–ª—å</title>
    <link rel="stylesheet" href="css/ProfileStyles.css">
    <link rel="stylesheet" href="css/Header.css">
    <link rel="stylesheet" href="css/Footer.css">
    <link rel="stylesheet" href="css/buttonStyle.css">
    <link rel="stylesheet" href="css/modals.css">
    <link rel="icon" href="img/Github-Octicons-Id-badge-16.512.png" type="image/png">
    <style>
        .container {
            width: 900px; 
            height: auto;
            margin: 50px auto;
            padding: 20px;
            background-color: #fff;
            border-left: 5px solid #28a745;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        h2 {
            text-align: left;
            color: #333;
        }

        #profile {
            margin-top: 20px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #f9f9f9;
            display: flex;
            align-items: center;
            justify-content: flex-start; /* –°–º–µ—â–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤–ª–µ–≤–æ */
        }

        .profile-pic {
            width: 175px; 
            height: 175px; 
            border-radius: 50%; 
            object-fit: cover; 
            margin-right: 15px; 
        }

        .profile-info {
            margin-left: 15px; /* –û—Ç—Å—Ç—É–ø –º–µ–∂–¥—É —Ñ–æ—Ç–æ –∏ –¥–∞–Ω–Ω—ã–º–∏ */
        }

        p {
            font-size: 16px;
            margin: 10px 0;
        }

        strong {
            color: #555;
        }

        .upload-btn {
            background-color: #4CAF50; /* –ó–µ–ª–µ–Ω—ã–π —Ñ–æ–Ω */
            color: white; /* –¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ */
            padding: 5px 15px; /* –û—Ç—Å—Ç—É–ø—ã */
            border: none; /* –£–±–∏—Ä–∞–µ–º —Ä–∞–º–∫—É */
            border-radius: 5px; /* –ó–∞–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–µ —É–≥–ª—ã */
            cursor: pointer; /* –£–∫–∞–∑–∞—Ç–µ–ª—å –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
            margin-left: 40px; /* –û—Ç—Å—Ç—É–ø —Å–ª–µ–≤–∞ –æ—Ç —Ñ–æ—Ç–æ */
            margin-top: 10px;
            height: 20px;
            width: 170px;
        }

        .upload-btn:hover {
            background-color: #45a049; /* –¶–≤–µ—Ç –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
        }

        textarea {
            width: 640px; /* –®–∏—Ä–∏–Ω–∞ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—è */
            height: 120px;
            margin-top: 10px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            resize: none; /* –ó–∞–ø—Ä–µ—â–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—è */
        }

        select {
            margin-top: 10px;
            padding: 5px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .achievements {
            margin-top: 20px; 
        }

        .achievement-input {
            width: 100%;
            margin-top: 10px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        footer {
            margin-top: 20px;
            text-align: center;
        }

        .social-links img {
            width: 30px;
            margin: 0 10px;
        }

        .save-bio-btn {
            background-color: #4CAF50; 
            color: white; 
            padding: 5px 15px; 
            border: none; 
            border-radius: 5px; 
            cursor: pointer; 
            margin-top: 10px; 
            height: 35px; 
            width: 130px; 
            font-size: 12px; 
        }

        .save-bio-btn:hover {
            background-color: #45a049; 
        }

        #interestsInput {
            width: 100%; 
            height: 40px; 
            padding: 10px; 
            border: 1px solid #ddd; 
            border-radius: 5px; 
            resize: none; 
        }

        .add-interest-btn, .save-interests-btn {
 background-color: #4CAF50; 
            color: white; 
            border: none; 
            padding: 10px 15px; 
            text-align: center; 
            text-decoration: none; 
            display: inline-block; 
            font-size: 12px; 
            margin: 5px 2px; 
            cursor: pointer; 
            border-radius: 5px; 
            transition: background-color 0.3s; 
        }

        .add-interest-btn:hover, .save-interests-btn:hover {
            background-color: #45a049; 
        }

        @media (max-width: 900px) {
            .container {
                width: 90%;
                padding: 15px;
            }

            p {
                font-size: 14px;
            }

            .profile-pic {
                width: 170px; 
                height: 170px;
            }
        }    
    </style>
</head>
<body>
<header class="header">
    <div class="logo-container">
        <a href="main.html"><img src="img/logo.png" alt="–õ–æ–≥–æ—Ç–∏–ø" id="logo" style="width: 50px; height: 50px;"></a>
        <a class="YouKnow" href="main.html"><span>YouKnow</span></a>
    </div>
    <nav>
        <ul class="nav-links">
            <li>
                <div class="dropdown">
                    <button class="dropbtn">–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</button>
                    <div class="dropdown-content">
                        <a href="Library.html">–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞</a>
                        <a href="Forum.html">–û–±—Å—É–∂–¥–µ–Ω–∏—è</a>
                        <a href="Courses.html">–ö—É—Ä—Å—ã</a>
                        <a href="Video.html">–í–∏–¥–µ–æ—É—Ä–æ–∫–∏</a>
                    </div>
                </div>
            </li>
            <li class="search-container">
                <input type="text" placeholder="–ü–æ–∏—Å–∫ –ø–æ —Å–∞–π—Ç—É">
                <button class="search-btn">üîç</button>
            </li>
            <li class="hamburger-menu">
                <button class="hamburger-btn">‚ò∞</button>
                <div class="dropdown-content">
                    <a href="profile.html">–ü—Ä–æ—Ñ–∏–ª—å</a>
                    <a href="#" class="settings-btn">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</a>
                    <a href="#" class="contactUS-btn">–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å</a>
                    <a href="Questions.html" class="contactUS-btn">FAQ</a>
                </div>
            </li>
            <li><a href="#" class="login-btn">–í—Ö–æ–¥</a></li>
        </ul>
    </nav>
</header>

<div class="container">
    <h2>–í–∞—à –ø—Ä–æ—Ñ–∏–ª—å</h2>
    <div id="profile" style="position: relative;">
        <label for="fileInput">
            <img src="img/DefaultPFP.png" alt="–§–æ—Ç–æ –ø—Ä–æ—Ñ–∏–ª—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç" class="profile-pic" id="profileImage"> 
        </label>
        <div class="profile-info">
            <p><strong>–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</strong> <span id="profileUsername"></span></p>
            <p><strong>–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞:</strong> <span id="profileEmail"></span></p>
            <p><strong>–ë–∏–æ–≥—Ä–∞—Ñ–∏—è:</strong></p>
            <textarea id="bioInput" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ —á—Ç–æ-—Ç–æ –æ —Å–µ–±–µ..." maxlength="3000"></textarea>
            <button class="save-bio-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            <p><strong>–ò–Ω—Ç–µ—Ä–µ—Å—ã:</strong></p>
            <textarea id="interestsInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–∏ –∏–Ω—Ç–µ—Ä–µ—Å—ã (–ø–æ –æ–¥–Ω–æ–º—É –Ω–∞ —Å—Ç—Ä–æ–∫—É)..." rows="2" maxlength="500"></textarea>
            <div>
                <button class="add-interest-btn">–î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ç–µ—Ä–µ—Å</button>
                <button class="save-interests-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–Ω—Ç–µ—Ä–µ—Å—ã</button>
            </div>
        </div>
        <input type="file" id="fileInput" accept="image/*" onchange="loadImage(event)" style="display:none;">     
        <p style="position: absolute; top: 15px; right: 15px;">
            <strong>–°—Ç–∞—Ç—É—Å:</strong>
            <select id="statusSelector" style="margin-left: 5px;">
                <option value="online">–í —Å–µ—Ç–∏</option>
                <option value="busy">–ó–∞–Ω—è—Ç</option>
                <option value="away">–û—Ç–æ—à–µ–ª</option>
            </select>
        </p>
    </div>
</div>
<div id="login-modal" class="modal" style="color: black;">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h2>–í—Ö–æ–¥</h2>
            <form>
                <label for="username">–õ–æ–≥–∏–Ω:</label>
                <input type="text" id="username" name="username" required><br />
                <label for="password">–ü–∞—Ä–æ–ª—å:</label>
                <input type="password" id="password" name="password" required><br /><br />
                <a class="registerbutton" href="RegistrationForm.html">–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç</a><br /><br />
                <button type="submit" class="submit">–í–æ–π—Ç–∏</button>
            </form>
        </div>
    </div>
    <div id="login-modal2" class="modal" style="color: black;">
        <div class="modal-content">
            <span class="close-btn2">&times;</span>
            <h2>–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å</h2>
            <form>
                <label for="name">–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è:</label>
                <input type="text" id="username" name="username"><br /> 
                <label for="email">–í–≤–µ–¥–∏—Ç–µ –≤–∞—à email:</label>
                <input type="email" id="email" name="email" required><br /> 
                <label for="message">–û–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É:</label><br /> 
                <textarea></textarea><br />
                <button type="submit" class="submit">–í–æ–π—Ç–∏</button>
            </form>
        </div>
    </div>
    <div id="login-modal3" class="modal" style="color: black;">
        <div class="modal-content">
            <span class="close-btn3">&times;</span>
            <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
            <form>
                <label for="name">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É</label>
                <a href="#">
                    <label class="switch">
                        <input type="checkbox" id="dark-mode-toggle">
                        <span class="slider"></span>
                    </label>
                </a>
            </form>
            <form>
                <a href="#">
                    <label class="switch">
                        <input type="radio" id="">
                        <span class=""></span>
                    </label>
                </a>
            </form>
        </div>
    </div>


<footer>
    <div class="social-links">
        <a href="https:// telegram.org/" target="_blank">
            <img class="Telegram" src="img/telegram.png" alt="Telegram">
        </a>
        <a href="https://github.com/Cooljssj-ty" target="_blank">
            <img class="Github" src="img/github.png" alt="Github">
        </a>
    </div>
    <p>–ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</p>
    <p>–°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏</p>
    <li style="list-style: none;"><a href="AboutUS.html">–û –Ω–∞—Å</a></li>
</footer>

<script src="buttonscript.js"></script>
<script>
    let interests = [];

    function loadImage(event) {
        const image = document.getElementById('profileImage');
        image.src = URL.createObjectURL(event.target.files[0]);
    }

    function getCookie(name) {
        const value = `; ${document.cookie}`;
        const parts = value.split(`; ${name}=`);
        if (parts.length === 2) return parts.pop().split(';').shift();
        return null;
    }

    window.onload = function() {
        const userId = getCookie('userId');

        if (!userId) {
            alert('–í—ã –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ã!');
            return;
        }

        fetch(`/api/user/${userId}`)
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    const user = data.user;
                    document.getElementById('profileUsername').textContent = user.usname;
                    document.getElementById('profileEmail').textContent = user.email;

                    // –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∏–Ω—Ç–µ—Ä–µ—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                    if (user.interests && user.interests.length > 0) {
                        interests = user.interests;
                        document.getElementById('interestsInput').value = interests.join('\n');
                    }
                } else {
                    alert('–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è');
                }
            })
            .catch(error => {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ—Ñ–∏–ª—è:', error);
                alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ—Ñ–∏–ª—è');
            });
    };

    document.querySelector('.add-interest-btn').addEventListener('click', function() {
        const interestsInput = document.getElementById('interestsInput');
        const newInterest = interestsInput.value.trim();

        if (newInterest) {
            interests.push(newInterest);
            interestsInput.value = ''; // –û—á–∏—Å—Ç–∏—Ç—å –ø–æ–ª–µ –≤–≤–æ–¥–∞
            alert(`–ò–Ω—Ç–µ—Ä–µ—Å "${newInterest}" –¥–æ–±–∞–≤–ª–µ–Ω!`);
        } else {
            alert('–í–≤–µ–¥–∏—Ç–µ –∏–Ω—Ç–µ—Ä–µ—Å –ø–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º.');
        }
    });

    document.querySelector('.save-interests-btn').addEventListener('click', function() {
        const userId = getCookie('userId');

        fetch(`/api/user/${userId}/interests`, {
            method: 'PUT',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ interests: interests })
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                alert('–ò–Ω—Ç–µ—Ä–µ—Å—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!');
            } else {
                alert('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–Ω—Ç–µ—Ä–µ—Å—ã.');
            }
        })
        .catch(error => {
            console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤:', error);
            alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤');
        });
    });
</script>
</body>
</html>